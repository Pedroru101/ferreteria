<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Loaders y Spinners</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/loaders.css">
    <style>
        body {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-card);
        }
        .test-section h2 {
            margin-top: 0;
            color: var(--primary);
        }
        .test-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        .btn-test {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-test:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }
        .btn-test:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .test-container {
            min-height: 100px;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .info-box {
            background: rgba(45, 122, 62, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary);
        }
        .code-block {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: monospace;
            font-size: 12px;
            margin-top: 1rem;
        }
        [data-theme="dark"] .code-block {
            background: #1a1a1a;
            color: #e8f5e9;
        }
    </style>
</head>
<body>
    <h1>Test - Sistema de Loaders y Spinners</h1>
    <p>Esta página prueba todos los tipos de loaders disponibles en el sistema.</p>

    <!-- Test 1: Overlay Loader -->
    <div class="test-section">
        <h2>1. Overlay Loader (Pantalla Completa)</h2>
        <div class="info-box">
            Muestra un loader que cubre toda la pantalla. Ideal para operaciones largas.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testOverlayLoader()">Mostrar Overlay</button>
            <button class="btn-test" onclick="testOverlayWithTimeout()">Overlay con Timeout (3s)</button>
            <button class="btn-test" onclick="testOverlayWithAsync()">Overlay con Función Async</button>
        </div>
        <div class="code-block">
loaderManager.showOverlay('Cargando...', 'Por favor espera');
loaderManager.hideOverlay();
        </div>
    </div>

    <!-- Test 2: Inline Loader - Spinner -->
    <div class="test-section">
        <h2>2. Inline Loader - Spinner</h2>
        <div class="info-box">
            Muestra un spinner dentro de un contenedor específico.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testInlineSpinner()">Mostrar Spinner</button>
            <button class="btn-test" onclick="testInlineSpinnerWithTimeout()">Spinner con Timeout (3s)</button>
        </div>
        <div id="inlineSpinnerContainer" class="test-container">
            Contenedor para inline spinner
        </div>
        <div class="code-block">
loaderManager.showInline('#contenedor', 'Cargando...', 'spinner');
        </div>
    </div>

    <!-- Test 3: Inline Loader - Dots -->
    <div class="test-section">
        <h2>3. Inline Loader - Dots (Puntos)</h2>
        <div class="info-box">
            Muestra un loader de puntos animados.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testInlineDots()">Mostrar Dots</button>
            <button class="btn-test" onclick="testInlineDotsWithTimeout()">Dots con Timeout (3s)</button>
        </div>
        <div id="inlineDotsContainer" class="test-container">
            Contenedor para inline dots
        </div>
        <div class="code-block">
loaderManager.showInline('#contenedor', 'Cargando...', 'dots');
        </div>
    </div>

    <!-- Test 4: Inline Loader - Wave -->
    <div class="test-section">
        <h2>4. Inline Loader - Wave (Onda)</h2>
        <div class="info-box">
            Muestra un loader de onda animada.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testInlineWave()">Mostrar Wave</button>
            <button class="btn-test" onclick="testInlineWaveWithTimeout()">Wave con Timeout (3s)</button>
        </div>
        <div id="inlineWaveContainer" class="test-container">
            Contenedor para inline wave
        </div>
        <div class="code-block">
loaderManager.showInline('#contenedor', 'Cargando...', 'wave');
        </div>
    </div>

    <!-- Test 5: Inline Loader - Progress -->
    <div class="test-section">
        <h2>5. Inline Loader - Progress (Progreso)</h2>
        <div class="info-box">
            Muestra una barra de progreso animada.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testInlineProgress()">Mostrar Progress</button>
            <button class="btn-test" onclick="testInlineProgressWithTimeout()">Progress con Timeout (3s)</button>
        </div>
        <div id="inlineProgressContainer" class="test-container">
            Contenedor para inline progress
        </div>
        <div class="code-block">
loaderManager.showInline('#contenedor', 'Procesando...', 'progress');
        </div>
    </div>

    <!-- Test 6: Button Spinner -->
    <div class="test-section">
        <h2>6. Button Spinner</h2>
        <div class="info-box">
            Agrega un spinner a un botón mientras se procesa una acción.
        </div>
        <div class="test-buttons">
            <button class="btn-test" id="testButtonSpinner" onclick="testButtonSpinner()">
                <i class="fas fa-save"></i> Guardar
            </button>
            <button class="btn-test" onclick="testButtonSpinnerWithAsync()">
                <i class="fas fa-download"></i> Descargar (Async)
            </button>
        </div>
        <div class="code-block">
loaderManager.addButtonSpinner('#boton', 'Procesando...');
loaderManager.removeButtonSpinner('#boton');
        </div>
    </div>

    <!-- Test 7: Skeleton Loader -->
    <div class="test-section">
        <h2>7. Skeleton Loader</h2>
        <div class="info-box">
            Muestra un placeholder animado mientras se cargan datos.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testSkeletonBasic()">Skeleton Básico</button>
            <button class="btn-test" onclick="testSkeletonWithAvatar()">Skeleton con Avatar</button>
            <button class="btn-test" onclick="testSkeletonWithCard()">Skeleton con Card</button>
            <button class="btn-test" onclick="testSkeletonComplete()">Skeleton Completo</button>
        </div>
        <div id="skeletonContainer" class="test-container">
            Contenedor para skeleton
        </div>
        <div class="code-block">
loaderManager.createSkeleton('#contenedor', {
    lines: 3,
    avatarSize: 48,
    showAvatar: true,
    showCard: false
});
        </div>
    </div>

    <!-- Test 8: Métodos Abreviados -->
    <div class="test-section">
        <h2>8. Métodos Abreviados</h2>
        <div class="info-box">
            Métodos rápidos para mostrar loaders comunes.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testShowDots()">showDots()</button>
            <button class="btn-test" onclick="testShowWave()">showWave()</button>
            <button class="btn-test" onclick="testShowProgress()">showProgress()</button>
        </div>
        <div id="shortcutContainer" class="test-container">
            Contenedor para métodos abreviados
        </div>
    </div>

    <!-- Test 9: Funciones Async -->
    <div class="test-section">
        <h2>9. Funciones Async (withOverlay, withInline, withButtonSpinner)</h2>
        <div class="info-box">
            Ejecuta funciones asincrónicas con loaders automáticos.
        </div>
        <div class="test-buttons">
            <button class="btn-test" onclick="testWithOverlay()">withOverlay()</button>
            <button class="btn-test" onclick="testWithInline()">withInline()</button>
            <button class="btn-test" onclick="testWithButtonSpinner()">withButtonSpinner()</button>
        </div>
        <div id="asyncContainer" class="test-container">
            Contenedor para funciones async
        </div>
        <div class="code-block">
await loaderManager.withOverlay(async () => {
    const data = await fetchData();
    return data;
}, 'Cargando...', 'Por favor espera');
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="js/loaders.js"></script>
    <script>
        // Test 1: Overlay Loader
        function testOverlayLoader() {
            loaderManager.showOverlay('Cargando datos...', 'Conectando con el servidor');
            setTimeout(() => {
                loaderManager.hideOverlay();
                alert('Overlay cerrado');
            }, 2000);
        }

        function testOverlayWithTimeout() {
            loaderManager.showOverlay('Procesando...', 'Por favor espera');
            setTimeout(() => {
                loaderManager.hideOverlay();
            }, 3000);
        }

        async function testOverlayWithAsync() {
            try {
                await loaderManager.withOverlay(
                    async () => {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        return 'Datos cargados';
                    },
                    'Cargando datos...',
                    'Conectando con el servidor'
                );
                alert('Datos cargados exitosamente');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        // Test 2: Inline Spinner
        function testInlineSpinner() {
            loaderManager.showInline('#inlineSpinnerContainer', 'Cargando productos...', 'spinner');
        }

        function testInlineSpinnerWithTimeout() {
            const loaderId = loaderManager.showInline('#inlineSpinnerContainer', 'Cargando...', 'spinner');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#inlineSpinnerContainer').innerHTML = 'Contenedor para inline spinner';
            }, 3000);
        }

        // Test 3: Inline Dots
        function testInlineDots() {
            loaderManager.showInline('#inlineDotsContainer', 'Cargando...', 'dots');
        }

        function testInlineDotsWithTimeout() {
            const loaderId = loaderManager.showInline('#inlineDotsContainer', 'Cargando...', 'dots');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#inlineDotsContainer').innerHTML = 'Contenedor para inline dots';
            }, 3000);
        }

        // Test 4: Inline Wave
        function testInlineWave() {
            loaderManager.showInline('#inlineWaveContainer', 'Cargando...', 'wave');
        }

        function testInlineWaveWithTimeout() {
            const loaderId = loaderManager.showInline('#inlineWaveContainer', 'Cargando...', 'wave');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#inlineWaveContainer').innerHTML = 'Contenedor para inline wave';
            }, 3000);
        }

        // Test 5: Inline Progress
        function testInlineProgress() {
            loaderManager.showInline('#inlineProgressContainer', 'Procesando...', 'progress');
        }

        function testInlineProgressWithTimeout() {
            const loaderId = loaderManager.showInline('#inlineProgressContainer', 'Procesando...', 'progress');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#inlineProgressContainer').innerHTML = 'Contenedor para inline progress';
            }, 3000);
        }

        // Test 6: Button Spinner
        function testButtonSpinner() {
            const btn = document.getElementById('testButtonSpinner');
            loaderManager.addButtonSpinner(btn, 'Guardando...');
            setTimeout(() => {
                loaderManager.removeButtonSpinner(btn);
            }, 2000);
        }

        async function testButtonSpinnerWithAsync() {
            const btn = event.target;
            try {
                await loaderManager.withButtonSpinner(
                    btn,
                    async () => {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                    },
                    'Descargando...'
                );
                alert('Descarga completada');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        // Test 7: Skeleton Loader
        function testSkeletonBasic() {
            loaderManager.createSkeleton('#skeletonContainer', {
                lines: 3
            });
        }

        function testSkeletonWithAvatar() {
            loaderManager.createSkeleton('#skeletonContainer', {
                lines: 3,
                showAvatar: true,
                avatarSize: 48
            });
        }

        function testSkeletonWithCard() {
            loaderManager.createSkeleton('#skeletonContainer', {
                lines: 2,
                showCard: true
            });
        }

        function testSkeletonComplete() {
            loaderManager.createSkeleton('#skeletonContainer', {
                lines: 4,
                showAvatar: true,
                showCard: true,
                avatarSize: 64
            });
        }

        // Test 8: Métodos Abreviados
        function testShowDots() {
            const loaderId = loaderManager.showDots('#shortcutContainer', 'Cargando...');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#shortcutContainer').innerHTML = 'Contenedor para métodos abreviados';
            }, 2000);
        }

        function testShowWave() {
            const loaderId = loaderManager.showWave('#shortcutContainer', 'Cargando...');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#shortcutContainer').innerHTML = 'Contenedor para métodos abreviados';
            }, 2000);
        }

        function testShowProgress() {
            const loaderId = loaderManager.showProgress('#shortcutContainer', 'Procesando...');
            setTimeout(() => {
                loaderManager.hideInline(loaderId);
                document.querySelector('#shortcutContainer').innerHTML = 'Contenedor para métodos abreviados';
            }, 2000);
        }

        // Test 9: Funciones Async
        async function testWithOverlay() {
            try {
                await loaderManager.withOverlay(
                    async () => {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                    },
                    'Cargando datos...',
                    'Conectando con el servidor'
                );
                alert('Operación completada');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function testWithInline() {
            try {
                await loaderManager.withInline(
                    '#asyncContainer',
                    async () => {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                    },
                    'Cargando...',
                    'spinner'
                );
                document.querySelector('#asyncContainer').innerHTML = 'Contenedor para funciones async';
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function testWithButtonSpinner() {
            const btn = event.target;
            try {
                await loaderManager.withButtonSpinner(
                    btn,
                    async () => {
                        await new Promise(resolve => setTimeout(resolve, 2000));
                    },
                    'Procesando...'
                );
                alert('Operación completada');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        console.log('Sistema de Loaders cargado correctamente');
        console.log('Instancia global: loaderManager');
    </script>
</body>
</html>
